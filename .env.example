# CAAL Voice Framework Configuration
# Copy to .env and update values

# =============================================================================
# Network Mode - Choose ONE option below
# =============================================================================
#
# OPTION A: LAN HTTP (default)
#   - Access via http://<LAN_IP>:3000
#   - Run: docker compose up -d
#   - Voice works from host machine, text-only from other devices
#
# OPTION B: LAN HTTPS (mkcert)
#   - Access via https://<LAN_IP>
#   - Run: docker compose --profile https up -d
#   - Full voice from any device on LAN
#   - Requires: mkcert for local certs (see README)
#
# OPTION C: Tailscale HTTPS (remote access)
#   - Access via https://<TAILSCALE_DOMAIN>
#   - Run: docker compose --profile https up -d
#   - Full voice from anywhere
#   - Requires: tailscale cert <domain> (see README)
#
# -----------------------------------------------------------------------------

# OPTION A: LAN HTTP (default)
# Find your LAN IP: ip addr show | grep "inet " | grep -v 127.0.0.1
CAAL_HOST_IP=192.168.1.100

# OPTION B: LAN HTTPS with mkcert (uncomment HTTPS_DOMAIN, keep CAAL_HOST_IP)
# HTTPS_DOMAIN=192.168.1.100

# OPTION C: Tailscale HTTPS (uncomment both, update CAAL_HOST_IP to Tailscale IP)
# CAAL_HOST_IP=100.x.x.x                         # tailscale ip -4
# HTTPS_DOMAIN=your-machine.tailnet.ts.net       # tailscale cert <this-value>

# =============================================================================
# LiveKit Configuration
# =============================================================================
LIVEKIT_URL=ws://localhost:7880
LIVEKIT_API_KEY=devkey
LIVEKIT_API_SECRET=secret

# =============================================================================
# STT Configuration (Speaches - Faster-Whisper)
# =============================================================================
# URL for Speaches STT server (localhost for local dev, docker-compose overrides)
SPEACHES_URL=http://localhost:8000

# Whisper model for STT (full HuggingFace name)
WHISPER_MODEL=Systran/faster-whisper-medium

# =============================================================================
# TTS Configuration (Kokoro via remsky/kokoro-fastapi)
# =============================================================================
# URL for Kokoro TTS server (localhost for local dev, docker-compose overrides)
KOKORO_URL=http://localhost:8880

# Kokoro voice for TTS
# Options: af_heart, af_bella, af_sarah (female), am_adam, am_puck (male)
TTS_VOICE=am_puck

# =============================================================================
# LLM (Ollama)
# =============================================================================
# Ollama server URL (use your machine's IP, not localhost)
OLLAMA_HOST=http://192.168.1.100:11434

# Model name (ministral-3:8b recommended for tool calling + low latency. Requires Ollama 0.13.3+)
OLLAMA_MODEL=ministral-3:8b

# Disable thinking mode for lower latency (important for voice!)
OLLAMA_THINK=false
OLLAMA_TEMPERATURE=0.7
# Context window size (default 8192, increase for better tool response handling)
OLLAMA_NUM_CTX=16384
# Max conversation turns to keep in sliding window (prevents context overflow)
OLLAMA_MAX_TURNS=20

# Number of tool responses to cache for follow-up queries
TOOL_CACHE_SIZE=3

# =============================================================================
# n8n MCP Server
# =============================================================================
# n8n MCP endpoint URL (required for workflow tools)
N8N_MCP_URL=http://192.168.1.100:5678/mcp-server/http

# n8n MCP access token (required - get from n8n Settings > MCP Access)
N8N_MCP_TOKEN=your_n8n_mcp_token_here

# =============================================================================
# Wake Word Detection (Picovoice Porcupine)
# =============================================================================
# Get your access key from https://console.picovoice.ai/
# Leave empty to disable wake word feature
# Also requires hey_cal.ppn and porcupine_params.pv in frontend/public/
PORCUPINE_ACCESS_KEY=

# =============================================================================
# General
# =============================================================================
# IANA timezone ID - see: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones
TIMEZONE=America/Los_Angeles
# Display name spoken by CAAL (optional, defaults to "Pacific Time")
TIMEZONE_DISPLAY=Pacific Time
